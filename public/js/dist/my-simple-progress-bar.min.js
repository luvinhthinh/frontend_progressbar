function createRactive(a,b,c){return new Ractive({el:a,template:b,data:c})}function findBarByAttribute(a,b,c){console.log("barId -> ",c),console.log("bars -> ",JSON.stringify(a));var d=a.find(function(a){return console.log(JSON.stringify(a)),a[b]===c});return console.log(d),d}function addValue(a,b,c){return a+b>=c?a+b:0}function updateColor(a){$("#"+a.id).css("background",a.currentValue>a.colorChangeThreshold?a.color_high:a.color_low)}bars=[{id:"b1",name:"#progress1",min:0,colorChangeThreshold:100,currentValue:25,color_low:"lightblue",color_high:"red"},{id:"b2",name:"#progress2",min:0,colorChangeThreshold:100,currentValue:50,color_low:"lightblue",color_high:"red"},{id:"b3",name:"#progress3",min:0,colorChangeThreshold:100,currentValue:75,color_low:"lightblue",color_high:"red"}],buttons=[{value:-25,label:"-25"},{value:-10,label:"-10"},{value:10,label:"+10"},{value:25,label:"+25"}];var ractive=createRactive("#container","#template-progressbar",{bars:bars,buttons:buttons});ractive.on("add",function(a,b){var c=ractive.get("selectedBar"),d=findBarByAttribute(bars,"id",c);d.currentValue=addValue(d.currentValue,b,d.min),ractive.update(),updateColor(d)});